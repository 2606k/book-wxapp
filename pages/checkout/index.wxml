<!--pages/checkout/index.wxml-->
<view class="checkout-container">
  <!-- æ”¶è´§åœ°å€ -->
  <view class="address-section" bindtap="selectAddress">
    <view wx:if="{{!selectedAddress}}" class="no-address">
      <view class="address-icon">ğŸ“</view>
      <text class="no-address-text">è¯·é€‰æ‹©æ”¶è´§åœ°å€</text>
      <text class="arrow">></text>
    </view>
    
    <view wx:else class="address-info">
      <view class="address-header">
        <view class="address-icon">ğŸ“</view>
        <view class="user-info">
          <text class="user-name">{{selectedAddress.name}}</text>
          <text class="user-phone">{{selectedAddress.phone}}</text>
        </view>
        <text class="arrow">></text>
      </view>
      <view class="address-detail">
        <text class="address-text">{{selectedAddress.address}}</text>
      </view>
    </view>
  </view>

  <!-- å•†å“åˆ—è¡¨ -->
  <view class="goods-section">
    <view class="section-header">
      <text class="section-title">å•†å“æ¸…å•</text>
      <text class="goods-count">å…±{{totalCount}}ä»¶</text>
    </view>
    
    <view class="goods-list">
      <view 
        class="goods-item"
        wx:for="{{selectedItems}}" 
        wx:key="id"
      >
        <view class="goods-image">
          <image src="{{item.imageUrl}}" mode="aspectFit"></image>
        </view>
        
        <view class="goods-info">
          <view class="goods-name">{{item.bookName}}</view>
          <view class="goods-price-qty">
            <text class="goods-price">Â¥{{item.price / 100}}</text>
            <text class="goods-qty">Ã—{{item.quantity}}</text>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- è®¢å•å¤‡æ³¨ -->
  <view class="remark-section">
    <view class="section-title">è®¢å•å¤‡æ³¨</view>
    <textarea 
      class="remark-input"
      placeholder="é€‰å¡«ï¼Œè¯·è¾“å…¥è®¢å•å¤‡æ³¨"
      value="{{remark}}"
      bindinput="onRemarkInput"
      maxlength="200"
    />
  </view>

  <!-- è´¹ç”¨æ˜ç»† -->
  <view class="cost-section">
    <view class="cost-item">
      <text class="cost-label">å•†å“æ€»ä»·</text>
      <text class="cost-value">Â¥{{totalAmount / 100}}</text>
    </view>
    <view class="cost-item">
      <text class="cost-label">è¿è´¹</text>
      <text class="cost-value free">å…è´¹</text>
    </view>
    <view class="cost-divider"></view>
    <view class="cost-item total">
      <text class="cost-label">å®ä»˜æ¬¾</text>
      <text class="cost-value">Â¥{{totalAmount / 100}}</text>
    </view>
  </view>

  <!-- åº•éƒ¨æäº¤æ  -->
  <view class="submit-bar">
    <view class="total-info">
      <text class="total-text">åˆè®¡: </text>
      <text class="total-amount">Â¥{{totalAmount / 100}}</text>
    </view>
    
    <button 
      class="submit-btn {{submitting ? 'submitting' : ''}}"
      bindtap="submitOrder"
      disabled="{{submitting}}"
    >
      {{submitting ? 'æäº¤ä¸­...' : 'æäº¤è®¢å•'}}
    </button>
  </view>
</view>
